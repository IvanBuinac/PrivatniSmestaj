!function(a){var b={options:{topPadding:0,afterDetachCSSClass:"",savePanelSpace:!1,onDetached:null,onReAttached:null,parentSelector:null},init:function(c){var c=a.extend({},b.options,c);return this.each(function(){var d=Math.ceil(9999*Math.random());if(a(this).data("stickyPanel.state",{stickyPanelId:d,isDetached:!1,parentContainer:a(c.parentSelector?c.parentSelector:window),options:c}),c.parentSelector){var e=a(this).data("stickyPanel.state").parentContainer.css("position");switch(e){case"inherit":case"static":a(this).data("stickyPanel.state").parentContainer.css("position","relative")}}a(this).data("stickyPanel.state").parentContainer.bind("scroll.stickyPanel_"+d,{selected:a(this)},b.scroll)})},scroll:function(c){var d=c.data.selected,e=d.data("stickyPanel.state").options,f=d.data("stickyPanel.state").parentContainer,g=f.height(),h=d.outerHeight(!0),i=e.parentSelector?f.scrollTop():a(document).scrollTop(),j=e.parentSelector?f.height():a(document).height(),k=e.parentSelector?g:j-g,l=e.parentSelector?d.position().top:d.offset().top,m=l-e.topPadding,n=m<0?0:m,o=d.data("stickyPanel.state").isDetached;if(i<=k&&i>n&&!o){d.data("stickyPanel.state").isDetached=!0;var p=0;"undefined"!=e.topPadding&&(p+=e.topPadding);var q=e.parentSelector?d.position().left:d.offset().left,r=e.parentSelector?d.position().top:d.offset().top;d.data("PanelsTop",r-p);var s=null;if(1==e.savePanelSpace){var t=d.outerWidth(!0),u=d.css("float"),v=d.css("display"),w=Math.ceil(9999*Math.random());d.data("stickyPanel.PanelSpaceID","stickyPanelSpace"+w),s=a("<div id='"+d.data("stickyPanel.PanelSpaceID")+"' style='width:"+t+"px;height:"+h+"px;float:"+u+";display:"+v+";'>&#20;</div>"),d.before(s)}""!=e.afterDetachCSSClass&&d.addClass(e.afterDetachCSSClass),d.data("Original_Inline_CSS",d.attr("style")?d.attr("style"):""),d.css({margin:0,left:q,top:p,position:e.parentSelector?"absolute":"fixed",width:d.outerWidth(!1)}),e.onDetached&&e.onDetached(d,s)}e.parentSelector&&o&&d.css({top:e.topPadding?i+e.topPadding:i}),i<=d.data("PanelsTop")&&"auto"!=d.css("top")&&o&&b.unstick(d)},unstick:function(c){var d=c?c:this;d.data("stickyPanel.state").isDetached=!1;var e=d.data("stickyPanel.state").options;1==e.savePanelSpace&&a("#"+d.data("stickyPanel.PanelSpaceID")).remove(),d.attr("style",d.data("Original_Inline_CSS")),""!=e.afterDetachCSSClass&&d.removeClass(e.afterDetachCSSClass),e.onReAttached&&e.onReAttached(d),c||b._unstick(d)},_unstick:function(a){a.data("stickyPanel.state").parentContainer.unbind("scroll.stickyPanel_"+a.data("stickyPanel.state").stickyPanelId)}};a.fn.stickyPanel=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.stickyPanel"):b.init.apply(this,arguments)}}(jQuery);