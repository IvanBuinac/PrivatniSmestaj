!function(a){a.fn.imagefill=function(b){function k(){e=0,f=0,c.each(function(){d=a(this).find(h.target).width()/a(this).find(h.target).height();var b=a(this).outerWidth(),c=a(this).outerHeight();e+=a(this).outerHeight(),f+=a(this).outerWidth();var g=b/c;g<d?a(this).find(h.target).css({width:"auto",height:c,top:0,left:-(c*d-b)/2}):a(this).find(h.target).css({width:b,height:"auto",top:-(b/d-c)/2,left:0})})}function l(){var b=0,d=0;c.each(function(){d+=a(this).outerHeight(),b+=a(this).outerWidth()}),e===d&&f===b||k(),setTimeout(l,h.throttle)}var c=this,d=1,e=0,f=0,g={runOnce:!1,target:"img",throttle:200},h=a.extend({},g,b),i=c.find(h.target).addClass("loading").css({position:"absolute"}),j=c.css("position");return c.css({overflow:"hidden",position:"static"===j?"relative":j}),c.each(function(){e+=a(this).outerHeight(),f+=a(this).outerWidth()}),c.imagesLoaded().done(function(a){d=i.width()/i.height(),i.removeClass("loading"),k(),h.runOnce||l()}),this}}(jQuery);